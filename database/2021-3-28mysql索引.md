# 索引

* 定义：索引是一种用于快速查询和检索数据的数据结构。**常见的索引结构有: B 树， B+树和 Hash**。

## 优点

* 可以大大加快 数据的检索速度
* 另外，通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。

## 缺点

* 创建索引和维护索引需要耗费许多时间
* 占用物理存储空间 ：索引需要使用物理文件存储，也会耗费一定空间


## 索引类型

* 主键索引：一张数据表有只能有一个主键，并且主键不能为 null，不能重复。
* 唯一索引(Unique Key) ：唯一索引也是一种约束。唯一索引的属性列不能出现重复的数据，但是允许数据为 NULL，一张表允许创建多个唯一索引。
* 普通索引(Index) ：普通索引的唯一作用就是为了快速查询数据，一张表允许创建多个普通索引，并允许数据重复和 NULL。
* 前缀索引(Prefix) ：前缀索引只适用于字符串类型的数据。前缀索引是对文本的前几个字符创建索引，相比普通索引建立的数据更小， 因为只取前几个字符。
* 全文索引(Full Text) ：全文索引主要是为了检索大文本数据中的关键字的信息，是目前搜索引擎数据库使用的一种技术。Mysql5.6 之前只有 MYISAM 引擎支持全文索引，5.6 之后 InnoDB 也支持了全文索引。



# 聚集索引与非聚集索引

## 聚集索引

  * 定义：**聚集索引即索引结构和数据一起存放的索引。主键索引属于聚集索引**。

## 优点

  * 聚集索引的查询速度非常的快，因为整个 B+树本身就是一颗多叉平衡树，叶子节点也都是有序的，定位到索引的节点，就相当于定位到了数据。

## 缺点

  * 依赖于有序的数据
  * 更新代价大


## 非聚集索引

  * 定义：**非聚集索引即索引结构和数据分开存放的索引**


## 优点

  * **更新代价比聚集索引要小** 。非聚集索引的更新代价就没有聚集索引那么大了，非聚集索引的叶子节点是不存放数据的


## 缺点

  * 跟聚集索引一样，非聚集索引也依赖于有序的数据
  * **可能会二次查询(回表)** :这应该是非聚集索引最大的缺点了。


# 索引创建要点

* **符合最左前缀原则**
* 选择合适的字段并且尽量不为NULL
* 经常用于条件查询 和查询非常频繁的字段
* 经常用于外键连接的字段

  **以上要点创建索引时应该尽量符合**
  
  
  ## 不符合索引创建条件的点
  
  * 被频繁更新的字段应该慎重建立索引
  * 不被经常查询的字段没有必要建立索引
  * 尽可能的考虑建立联合索引而不是单列索引
  * 注意避免冗余索引
  * 考虑在字符串类型的字段上使用前缀索引代替普通索引

  （**前缀索引**仅限于字符串类型，较普通索引会占用更小的空间，所以可以考虑使用前缀索引带替普通索引。）















